# 如何使用增强版模型 🚀

## 目标

将验证准确率从83%提升至86-89%，冲击排行榜88.77%的成绩！

## 使用步骤

### 方法1: 直接运行（推荐）

```bash
cd /Users/gaga/CodeBuddy/project/COMP5434
python3 src/train_enhanced.py
```

训练过程约5-10分钟，会输出：
- 特征工程进度
- 3个模型的训练过程
- 验证准确率
- 最终集成结果

### 方法2: 后台运行

```bash
./quick_test_enhanced.sh

# 查看实时日志
tail -f training_enhanced.log

# 查看最后50行
tail -50 training_enhanced.log
```

## 输出文件

训练完成后会生成：

1. **output/submission_enhanced.csv** - 增强模型预测（推荐提交这个）⭐
2. **output/submission.csv** - 自动复制的最佳结果
3. **training_enhanced.log** - 完整训练日志

## 预期结果

```
============================================================
集成模型结果
============================================================
模型权重: [0.35 0.38 0.27]

集成模型验证准确率: 0.8xxx (目标: 86-89%)
============================================================
训练完成！
============================================================
验证准确率: 0.8xxx (xx.xx%)
提交文件: output/submission_enhanced.csv
```

## 优化要点

### 1. 特征工程（+11个特征）
- 总住宿天数、总人数
- 周末比例、人均价格
- 预订紧急程度
- 历史取消率
- 等等...

### 2. 模型集成（3个模型）
- 深层网络: [128, 64, 32, 16]
- 宽网络: [256, 128]
- 逻辑回归

### 3. 正则化技术
- Dropout (0.2-0.3)
- L2正则化
- 学习率衰减
- 早停机制

## 如果需要进一步调优

编辑 `src/train_enhanced.py`：

```python
# 增加网络深度
config1 = {
    'layer_sizes': [X_train.shape[1], 256, 128, 64, 32, 2],  # 更深
    'dropout_rate': 0.25,  # 调整dropout
    'epochs': 250,  # 更多轮数
}

# 调整学习率
'learning_rate': 0.005,  # 更小的学习率
```

## 常见问题

**Q: 训练需要多久？**
A: 约5-10分钟，取决于CPU性能。

**Q: 显存/内存不够？**
A: 减小batch_size或网络层数。

**Q: 准确率还是不够88%？**
A: 可以尝试：
1. 增加更多特征交互项
2. 调整模型集成权重
3. 使用更多模型
4. 数据增强

## 提交到Kaggle

```bash
# 使用增强版预测
# 文件: output/submission_enhanced.csv
# 格式: id, label
```

---

**祝你在排行榜上取得好成绩！** 🎉

如有问题，查看 `ENHANCEMENTS.md` 了解技术细节。
